# Data Governance Bot

Telegram-–±–æ—Ç –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –∫—É–ª—å—Ç—É—Ä—ã —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç GigaChat –¥–ª—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –¥–∞–Ω–Ω—ã–º–∏.

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ë–æ—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è:
- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –¥–∞–Ω–Ω—ã–º–∏
- –ü–æ–≤—ã—à–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∑–Ω–∞–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- –û–±–µ—Å–ø–µ—á–µ–Ω–∏—è –µ–¥–∏–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `bot_agent.py` | Telegram –±–æ—Ç —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º |
| `gigachat_tool_calling_agent.py` | –ê–≥–µ–Ω—Ç —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –ø–æ–∏—Å–∫–∞ (create_tool_calling_agent) |
| `manual_chain_agent.py` | –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç —Å –ø—Ä—è–º—ã–º –≤—ã–∑–æ–≤–æ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ |
| `document_processor.py` | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |
| `embeddings_manager.py` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω—ã–º–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º–∏ |

### –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:

- **`dama_dmbok`** - –°—Ç–∞–Ω–¥–∞—Ä—Ç DAMA DMBOK (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏)
- **`ctk_methodology`** - –†–µ–≥–ª–∞–º–µ–Ω—Ç—ã –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¶–¢–ö
- **`sbf_meta`** - –°–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –°–±–µ—Ä–§–∞–∫—Ç–æ—Ä–∏–Ω–≥ (–¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ)

## üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø—Ä–∞–≤–∞–º–∏:
- üìö **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** (PDF, DOC, DOCX, TXT)
- üîç **–ü–æ–∏—Å–∫ –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º** —á–µ—Ä–µ–∑ GigaChat
- üìã **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**
- üóëÔ∏è **–£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**
- üìä **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö**

### –î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- üí¨ **–¢–µ–∫—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã** —Å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º –ø–æ–∏—Å–∫–æ–º

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **LLM**: GigaChat (—Ä–æ—Å—Å–∏–π—Å–∫–∞—è –º–æ–¥–µ–ª—å)
- **–í–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î**: ChromaDB —Å HuggingFace embeddings
- **–§—Ä–µ–π–º–≤–æ—Ä–∫**: LangChain + LangGraph
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: Telegram Bot API
- **–Ø–∑—ã–∫**: Python 3.x

## üîê –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –∫–æ–ª–ª–µ–∫—Ü–∏—è–º –ø–æ ID:

| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | ID | –ö–æ–ª–ª–µ–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------------|----|-----------|----------|
| –°–ë–§ | —Ö—Ö—Ö | `sbf_meta` | –°–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ |
| –¶–¢–ö | —Ö—Ö—Ö | `ctk_methodology` | –†–µ–≥–ª–∞–º–µ–Ω—Ç—ã –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã |

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# GigaChat
GIGACHAT_TOKEN=your_gigachat_token

# Telegram Bot
TELEGRAM_BOT_TOKEN=your_telegram_bot_token

# HuggingFace (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
HF_TOKEN=your_huggingface_token
```

### –ó–∞–ø—É—Å–∫

```bash
# –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç
python bot_agent.py

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤
python gigachat_tool_calling_agent.py
python manual_chain_agent.py
```

## üìù –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Few-shot Examples
–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π GigaChat:

```python
few_shot_dama = [
    {
        "request": "–ß—Ç–æ —Ç–∞–∫–æ–µ DMBOK?",
        "params": {"query": "–ß—Ç–æ —Ç–∞–∫–æ–µ DMBOK?"}
    }
]
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
–î–ª—è TXT —Ñ–∞–π–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `chardet` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–¥–∏—Ä–æ–≤–∫–∏.

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥
–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –≤–∫–ª—é—á–∞—é—Ç:
- –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å (score)
- –û—á–∏—â–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫

### Fallback –ª–æ–≥–∏–∫–∞
–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤ —Ä–∞–±–æ—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞:
1. –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä—è–º–æ–≥–æ –≤—ã–∑–æ–≤–∞ LLM —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏
2. –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å –∫ LLM –±–µ–∑ —Ñ—É–Ω–∫—Ü–∏–π

## üîç –ü–æ–∏—Å–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### DAMA Search
- **–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞**: DAMA, DMBOK, dmbok, Data Management Body Of Knowledge
- **–ö–æ–ª–ª–µ–∫—Ü–∏—è**: `dama_dmbok`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–∏—Å–∫ –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏

### CTK Search
- **–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞**: –¶–¢–ö, –¶–µ–Ω—Ç—Ä –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ö–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥–∞, –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –¶–¢–ö
- **–ö–æ–ª–ª–µ–∫—Ü–∏—è**: `ctk_methodology`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–∏—Å–∫ –ø–æ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞–º –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –¶–¢–ö

### SBF Search
- **–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞**: –°–±–µ—Ä–§–∞–∫—Ç–æ—Ä–∏–Ω–≥, –°–ë–§, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –°–ë–§
- **–ö–æ–ª–ª–µ–∫—Ü–∏—è**: `sbf_meta`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–∏—Å–∫ –ø–æ —Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º (–¥–µ–º–æ)

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –º–æ–¥—É–ª—è `logging`:
- –£—Ä–æ–≤–µ–Ω—å: INFO
- –§–æ—Ä–º–∞—Ç: `%(asctime)s - %(name)s - %(levelname)s - %(message)s`

## üîß API —Ñ—É–Ω–∫—Ü–∏–π

### `call_agent(query, thread_id)`
–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### `get_functions_info()`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö –ø–æ–∏—Å–∫–∞.

### `search_documents(query, collection, n_results)`
–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –ø–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ —Ñ–∞–π–ª–æ–≤
- Fallback –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ —Å–±–æ—è—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ singleton –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –¥–ª—è embeddings
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ ChromaDB
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ Telegram –±–æ—Ç–µ

---

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–î–∞—Ç–∞**: 2024  
**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫**: Data Governance Team 